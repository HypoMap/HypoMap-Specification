# Спецификация Карты Гипотез

#### Версия 0.0.1

## Введение

Спецификация Hypothesis Map Specification (HMS) определяет стандарт описания карты гипотез.

Определение HMS затем может использоваться инструментами генерации документации для отображения Карты Гипотез, текстового описания стратегий, инструментами тестирования и многими другими вариантами использования.

## Содержание

## Определения

## Спецификация

### Версионирование

Спецификация HypoMap имеет версии, использующие схему управления версиями .major.minor.patch 

Документ HypoMap, совместимый с HMS 0.\*.\*, содержит обязательное поле `hypomap`, которое обозначает версию HMS, которую он использует.

### Формат

Документ HypoMap, соответствующий спецификации HypoMap, сам по себе является объектом JSON, который может быть представлен в формате JSON или YAML.

Например, если поле имеет значение массива, будет использоваться представление массива JSON:

```json
{
"field": [ 1, 2, 3 ]
}
```
Все имена полей в спецификации **чувствительны к регистру**.
Это включает все поля, которые используются в качестве ключей в массиве, за исключением случаев, когда явно указано, что ключи **нечувствительны к регистру**.

Схема предоставляет два типа полей: фиксированные поля, которые имеют объявленное имя, и шаблонные поля, которые объявляют шаблон регулярного выражения для имени поля.

Шаблонные поля ДОЛЖНЫ иметь уникальные имена в содержащем их объекте.

Чтобы сохранить возможность обмена данными между форматами YAML и JSON, РЕКОМЕНДУЕТСЯ использовать версию YAML [1.2](https://yaml.org/spec/1.2/spec.html) с некоторыми дополнительными ограничениями:

+ Теги ДОЛЖНЫ быть ограничены теми, которые разрешены [набором правил схемы JSON](https://yaml.org/spec/1.2/spec.html#id2803231).
+ Ключи, используемые в картах YAML, ДОЛЖНЫ быть ограничены скалярной строкой, как определено [набором правил схемы отказоустойчивости YAML](https://yaml.org/spec/1.2/spec.html#id2802346).

### Схема

**Фиксированные поля**

Название | Тип | Описание
---|:---:|---
hypomap | `string` | **Обязательное**. Данное поле содержит номер версии спецификации HypoMap
info | [Объект Info](#объект-info) | **Обязательное**. Содержит метаданные о спецификации. Метаданные МОГУТ использоваться инструментами при необходимости.
map | [Объект Map](#объект-map)  | **Обязательное**. Описание карты гипотез

#### Объект Info
Содержит метаданные о спецификации. Метаданные МОГУТ использоваться инструментами при необходимости.

##### Фиксированные поля  

Название | Тип | Описание
---|:---:|---
title | `string` | **Обязательное**. Название карты гипотез
summary | `string` | Краткое описание
description | `string` | Полное описание
contact | [Объект Contact](#объект-contact) | Контактная информация
version | `string` | Версия карты (текущего документа)

##### Пример объекта Info   

```json
{
  "info": {
    "title": "Карта гипотез",
    "summary": "Описание простой топологии",
    "description": "Описание простой топологии",
    "contact": {
      "name": "Alexey V. Naymushin",
      "url": "http://otken.ru",
      "email": "a@otken.ru"
    },
    "version": "1.0.0"
  }
}
```  

```yaml
info:
  title: Карта гипотез
  summary: Описание простой топологии
  description: Описание простой топологии
  contact: 
    name: Alexey V. Naymushin
    url: http://otken.ru
    email: a@otken.ru
  version: 1.0.0
```


#### Объект Contact  
Содержит контактную информацию  

##### Фиксированные поля  

Название | Тип | Описание
---|:---:|---
name | `string` | Автор
url | `string` | Ссылка на сайт
email | `string` | Электронная почта автора

##### Пример объекта Contact

```json
{
  "name": "Alexey V. Naymushin",
  "url": "http://otken.ru",
  "email": "a@otken.ru"
}
```  

```yaml
name: Alexey V. Naymushin 
url: http://otken.ru
email: a@otken.ru
```

#### Объект Map

Содержит описание основных объектов карты  
- Цели (goals)
- Метрики (metrics)
- Субъекты (subjects)
- Точки воздействия (боли/желания) (impacts)
- Гипотезы (hypotheses)
- Задачи (tasks)

##### Фиксированные поля

Field Name | Type | Description
---|:---:|---
goals | Map[`string`, [Объект goal](#объект-goal)] | **Обязательное**. Перечень целей. Ключ - уникальный идентификатор цели. Каждое значение в перечне - объект, описывающий цель.
metrics | Map[`string`, [Объект metric](#объект-metric)] | **Обязательное**. Перечень метрик. Ключ - уникальный идентификатор метрики. Каждое значение в перечне - объект, описывающий метрику.
subjects | Map[`string`, [Объект subject](#объект-subject)] | **Обязательное**. Перечень субъектов. Ключ - уникальный идентификатор суьъекта. Каждое значение в перечне - объект, описывающий субъект.
impacts | Map[`string`, [Объект impact](#объект-impact)] | **Обязательное**. Перечень воздействий (болей или желаний). Ключ - уникальный идентификатор воздействия. Каждое значение в перечне - объект, описывающий воздействие.
hypotheses | Map[`string`, [Объект hypothese](#объект-hypothesis)] | **Обязательное**. Перечень гипотез. Ключ - уникальный идентификатор гипотезы. Каждое значение в перечне - объект, описывающий гипотезу.
tasks | Map[`string`, [Объект task](#объект-task)] | **Обязательное**. Перечень задач. Ключ - уникальный идентификатор цели. Каждое значение в перечне - объект, описывающий задачу.

#### Объект Goal

Объект - описание цели.
 
##### Фиксированные поля
Field Name | Type | Description
---|:---:|---
title | `string` | **Обязательное**. Описание цели 
balance | `string` | Описание балансирующих метрик 

##### Пример объекта Goal

```json
{
  "title": "<Описание цели 1>",
  "balance": "... (метрики, которые не дадут сделать хуже, чем сейчас)"
}  
```  
```yaml  
title: "<Описание цели 1>"
balance: "... (метрики, которые не дадут сделать хуже, чем сейчас)"
```  

#### Объект Metric

Объект - описание метрики. 


##### Фиксированные поля
Field Name | Type | Description
---|:---:|---
title | `string` | **Обязательное**. Описание метрики 
now | `string` | Описание текущего состояния метрики
target | `string` | Описание целевого состояния метрики
ref | [`string`] | Массив ключей целей, к которым относится или на которые влияет метрика. Массив НЕ ДОЛЖЕН быть пустым.

##### Пример объекта Metric

```json
{
  "title": "<Описание метрики>",
  "now": "10 штук",
  "target": "100 штук, рост в 10 раз",
  "ref": ["goal1"]
}
```

```yaml
title: <Описание метрики>
now: 10 штук
target: 100 штук, рост в 10 раз
ref: 
  - goal1
```

#### Объект Subject

Объект - описание субъекта.
 
##### Фиксированные поля
Field Name | Type | Description
---|:---:|---
title | `string` | **Обязательное**. Описание субъекта 
ref | [`string`] | **Обязательное**. Массив ключей метрик, к которым относится или на которые влияет субъект. Массив НЕ ДОЛЖЕН быть пустым.

##### Пример объекта Subject

```json
{
    "title": "<Описание субъекта 1>",
    "ref": ["metric1"]
}
```  
```yaml  
title: "<Описание субъекта 1>"
ref:
  - metric1
```  

#### Объект Impact

Объект - описание воздействий (болей или желаний) субъекта.
 
##### Фиксированные поля
Field Name | Type | Description
---|:---:|---
type | `enum` | **Обязательное**. Поле ДОЛЖНО содержать одно значение из массива ["Боль", "Желание"].
title | `string` | **Обязательное**. Описание мотивации субъекта, которая важна для составления гипотез
ref | [`string`] | **Обязательное**. Массив ключей субъектов, к которым относится или на которые влияет воздействие.  Массив НЕ ДОЛЖЕН быть пустым.

##### Пример объекта Impact

```json
{
  "type": "Боль",
  "title": "... (мотивация субъекта, которая важна для составления гипотез)",
  "ref": ["subject1"]
}
```

```yaml  
type: Боль
title: "... (мотивация субъекта, которая важна для составления гипотез)"
ref:
  - subject1
```

#### Объект Hypothesis

Объект - описание гипотезы.
 
##### Фиксированные поля
Field Name | Type | Description
---|:---:|---
title | `string` | **Обязательное**. Описание гипотезы. Должно соответствовать [правилам описания гипотез](https://github.com/Byndyusoft/hypothesismapping?tab=readme-ov-file#3-%D0%B3%D0%B8%D0%BF%D0%BE%D1%82%D0%B5%D0%B7%D0%B0) 
ref | [`string`] | **Обязательное**. Массив ключей воздействий, к которым относится или на которые влияет гипотеза.  Массив НЕ ДОЛЖЕН быть пустым.

##### Пример объекта Hypothesis

```json
{
  "title": "Если <воздействие, приводящее к изменению поведения субъекта>, то <изменение поведения субъекта [и изменение метрик metric1 и metric2 таким-то образом]>, потому что <идея, описывающая, почему воздействие должно изменить поведение субъекта [и повлиять на метрики]>",
  "ref": ["impact1"]
}
```  
```yaml  
title: "Если <воздействие, приводящее к изменению поведения субъекта>, то <изменение поведения субъекта [и изменение метрик metric1 и metric2 таким-то образом]>, потому что <идея, описывающая, почему воздействие должно изменить поведение субъекта [и повлиять на метрики]>"
ref:
  - impact1
```

#### Объект Task

Объект - описание субъекта.
 
##### Фиксированные поля
Field Name | Type | Description
---|:---:|---
title | `string` | **Обязательное**. Описание задачи.
deadline | 'date' | Предельный срок выполнения задачи. Дата, к которой задача должна быть выполнена.
ref | [`string`] |  **Обязательное**. Массив ключей гипотез, к которым относится или на которые влияет задача. Массив НЕ ДОЛЖЕН быть пустым.

##### Пример объекта Task

```json
{
  "title": "<Описание задачи>",
  "ref": ["hypothesis1"]
}
```

```yaml  
title: "<Описание задачи>"
ref:
  - hypothesis1
```  
