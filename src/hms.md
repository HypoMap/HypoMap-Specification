# Спецификация Карты Гипотез

#### Версия 0.1-dev

## Введение

Спецификация Hypothesis Map (HPS) определяет стандарт описания карты гипотез.

Определение HPS затем может использоваться инструментами генерации документации для отображения Карты Гипотез, текстового описания стратегий, инструментами тестирования и многими другими вариантами использования.

## Содержание

## Определения

## Спецификация

### Версионирование

Спецификация HypoMap имеет версии, использующие схему управления версиями .major.minor.patch 

Документ HypoMap, совместимый с HPS 0.\*.\*, содержит обязательное поле [`hypomap`](#hpsVersion), которое обозначает версию HPS, которую он использует.

### Формат

Документ HypoMap, соответствующий спецификации HypoMap, сам по себе является объектом JSON, который может быть представлен в формате JSON или YAML.

Например, если поле имеет значение массива, будет использоваться представление массива JSON:

```json
{
"field": [ 1, 2, 3 ]
}
```
Все имена полей в спецификации **чувствительны к регистру**.
Это включает все поля, которые используются в качестве ключей в массиве, за исключением случаев, когда явно указано, что ключи **нечувствительны к регистру**.

Схема предоставляет два типа полей: фиксированные поля, которые имеют объявленное имя, и шаблонные поля, которые объявляют шаблон регулярного выражения для имени поля.

Шаблонные поля ДОЛЖНЫ иметь уникальные имена в содержащем их объекте.

Чтобы сохранить возможность обмена данными между форматами YAML и JSON, РЕКОМЕНДУЕТСЯ использовать версию YAML [1.2](https://yaml.org/spec/1.2/spec.html) с некоторыми дополнительными ограничениями:

+ Теги ДОЛЖНЫ быть ограничены теми, которые разрешены [набором правил схемы JSON](https://yaml.org/spec/1.2/spec.html#id2803231).
+ Ключи, используемые в картах YAML, ДОЛЖНЫ быть ограничены скалярной строкой, как определено [набором правил схемы отказоустойчивости YAML](https://yaml.org/spec/1.2/spec.html#id2802346).

### Схема

**Фиксированные поля**

Название | Тип | Описание
---|:---:|---
hypomap | `string` | **Обязательное**. Данное поле содержит номер версии спецификации HypoMap
info | [Объект Info](#Объект-info) | **Обязательное**. Содержит метаданные о спецификации. Метаданные МОГУТ использоваться инструментами при необходимости.
map | [Объект Map](#Объект-map)  | **Обязательное**. Описание карты гипотез

#### Объект Info
Содержит метаданные о спецификации. Метаданные МОГУТ использоваться инструментами при необходимости.

##### Фиксированные поля  

Название | Тип | Описание
---|:---:|---
title | string | **Обязательное**. Название карты гипотез
summary | string | Краткое описание
description | string | Полное описание
contact | [Объект Contact](#Объект-contact) | Контактная информация
version | string | Версия карты (текущего документа)

##### Пример объекта Info   

```json
{
  "info": {
    "title": "Карта гипотез",
    "summary": "Описание простой топологии",
    "description": "Описание простой топологии",
    "contact": {
      "name": "Alexey V. Naymushin",
      "url": "http://otken.ru",
      "email": "a@otken.ru"
    },
    "version": "1.0.0"
  }
}
```  

```yaml
info:
  title: Карта гипотез
  summary: Описание простой топологии
  description: Описание простой топологии
  contact: 
    name: Alexey V. Naymushin
    url: http://otken.ru
    email: a@otken.ru
  version: 1.0.0
```


#### Объект Contact  
Содержит контактную информацию  

##### Фиксированные поля  

Название | Тип | Описание
---|:---:|---
name | `string` | Автор
url | `string` | Ссылка на сайт
email | `string` | Электронная почта автора

##### Пример объекта Contact

```json
{
  "name": "Alexey V. Naymushin",
  "url": "http://otken.ru",
  "email": "a@otken.ru"
}
```  

```yaml
name: Alexey V. Naymushin 
url: http://otken.ru
email: a@otken.ru
```

#### Объект Map

Содержит описание основных объектов карты  
- Цели (goals)
- Метрики (metrics)
- Субъекты (subjects)
- Точки воздействия (боли/желания) (impacts)
- Гипотезы (hypotheses)
- Задачи (tasks)

##### Фиксированные поля

Field Name | Type | Description
---|:---:|---
goals | Map[`string`, [Объект goal](#объект-goal)] | **Обязательное**. Перечень целей. Ключ - уникальный идентификатор цели. Каждое значение в перечне - объект, описывающий цель.
metrics | Map[`string`, [Объект metric](#объект-metric)] | **Обязательное**. Перечень метрик. Ключ - уникальный идентификатор метрики. Каждое значение в перечне - объект, описывающий метрику.
subjects | Map[`string`, [Объект subject](#объект-subject)] | **Обязательное**. Перечень субъектов. Ключ - уникальный идентификатор суьъекта. Каждое значение в перечне - объект, описывающий субъект.
impacts | Map[`string`, [Объект impact](#объект-impact)] | **Обязательное**. Перечень воздействий (болей или желаний). Ключ - уникальный идентификатор воздействия. Каждое значение в перечне - объект, описывающий воздействие.
hypotheses | Map[`string`, [Объект hypothese](#объект-hypothese)] | **Обязательное**. Перечень гипотез. Ключ - уникальный идентификатор гипотезы. Каждое значение в перечне - объект, описывающий гипотезу.
tasks | Map[`string`, [Объект task](#объект-task)] | **Обязательное**. Перечень задач. Ключ - уникальный идентификатор цели. Каждое значение в перечне - объект, описывающий задачу.

#### Объект Goal

Объект - описание цели.
 
##### Фиксированные поля
Field Name | Type | Description
---|:---:|---
title | `string` | **Обязательное**. Описание цели 
balance | `string` | Описание балансирующих метрик 

##### Пример объекта Goal

```json
{
  "goal1": {
    "title": "<Описание цели 1>",
    "balance": "... (метрики, которые не дадут сделать хуже, чем сейчас)"
  },
  "goal2": {
    "title": "<Описание цели 2>",
    "balance": "... (метрики, которые не дадут сделать хуже, чем сейчас)"
  }
}  
```  
```yaml  
goal1:
  title: "<Описание цели 1>"
  balance: "... (метрики, которые не дадут сделать хуже, чем сейчас)"
goal2:
  title: "<Описание цели 2>"
  balance: "... (метрики, которые не дадут сделать хуже, чем сейчас)"  
```  

#### Объект Metric

Объект - описание метрики.

